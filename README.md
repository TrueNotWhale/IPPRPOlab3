# Поиск дубликатов файлов (Duplicate File Finder)

[![Java CI with Gradle](https://github.com/TrueNotWhale/IPPRPOlab3/actions/workflows/gradle.yml/badge.svg)](https://github.com/TrueNotWhale/IPPRPOlab3/actions)

Консольное приложение на Java, предназначенное для рекурсивного поиска и отображения файлов-дубликатов в указанной директории. Определение дубликатов происходит на основе их хэш-сумм.

Проект разработан в рамках лабораторной работы №3 по дисциплине "Инструменты поддержки промышленной разработки программного обеспечения".

## Основные возможности

*   **Рекурсивное сканирование:** Приложение обходит все вложенные папки, начиная с указанной корневой директории.
*   **Оптимизация производительности:** Поиск дубликатов происходит в два этапа:
    1.  Сначала файлы группируются по **размеру**.
    2.  Затем, только для групп файлов с одинаковым размером, вычисляются и сравниваются **хэш-суммы**.
*   **Конфигурируемость:** Все основные параметры (директория сканирования, алгоритм хэширования, игнорируемые папки) вынесены во внешний файл `app.properties`.
*   **Поддержка алгоритмов хэширования:** Возможность выбора между `MD5` и `SHA-256`.
*   **Непрерывная интеграция:** Настроен CI/CD пайплайн с помощью **GitHub Actions**, который автоматически собирает и тестирует проект на Windows и Ubuntu при каждом push в `main`.

## Технологический стек

*   **Язык:** Java 17
*   **Система сборки:** Gradle
*   **Тестирование:** JUnit 5 (Jupiter)
*   **CI/CD:** GitHub Actions

## Начало работы

### Требования

Для сборки и запуска проекта вам понадобятся:
*   Git (Можно скачать с [git-scm](https://git-scm.com/install/windows))
*   JDK (Java Development Kit) версии 17 (Можно скачать c [adoptium](https://www.oracle.com/java/technologies/downloads/#java17-windows))

### 1. Клонирование репозитория

Склонируйте репозиторий на ваш локальный компьютер:
```bash
git clone https://github.com/TrueNotWhale/IPPRPOlab3.git
cd IPPRPOlab3
```

### 2. Конфигурация приложения

ВАЖНО: Перед первым запуском необходимо создать файл конфигурации app.properties в корневой директории проекта.

Этот файл намеренно игнорируется системой контроля версий (добавлен в .gitignore), чтобы предотвратить случайную утечку чувствительных данных.

Создайте файл app.properties и добавьте в него следующее содержимое:

```cmd
# Директория для сканирования
scan.directory=./test-data
# Алгоритм хэширования: MD5, SHA-256
hash.algorithm=SHA-256
# Исключить директории (через запятую)
scan.ignore.dirs=.git,build
```

#### Описание параметров:

*   `scan.directory`: Путь к папке, в которой нужно искать дубликаты. Для примера создайте папку `test-data` и поместите туда несколько файлов, включая копии.
*   `hash.algorithm`: Алгоритм для расчета контрольной суммы. Рекомендуется `SHA-256` как более надежный.
*   `scan.ignore.dirs`: Список папок, которые будут проигнорированы при сканировании.

## Использование и запуск

Все команды следует выполнять из корневой папки проекта, используя Gradle Wrapper (`gradlew`).

### 1. Сборка проекта

Эта команда скомпилирует исходный код, запустит все тесты и упакует приложение в исполняемый JAR-файл.

*   **Windows:**
    ```cmd
    gradlew.bat build
    ```
*   **Linux / macOS:**
    ```bash
    ./gradlew build
    ```

После успешной сборки артефакты будут находиться в директории `app/build/libs/`.

### 2. Запуск тестов

Для запуска только модульных тестов без полной сборки приложения выполните:

*   **Windows:**
    ```cmd
    gradlew.bat test
    ```
*   **Linux / macOS:**
    ```bash
    ./gradlew test
    ```
Все тесты должны завершиться с пометкой `BUILD SUCCESSFUL`.

### 3. Запуск приложения

Это основная команда для запуска поиска дубликатов. Приложение считает конфигурацию из `app.properties` и выведет результат в консоль.

*   **Windows:**
    ```cmd
    gradlew.bat run
    ```
*   **Linux / macOS:**
    ```bash
    ./gradlew run
    ```

#### Пример вывода в консоли:

```cmd
Task :app:run
--- Found Duplicates ---

Group 1 (Hash: 5c0979d16c1ef452819fbe6b1ab2651c7ade74195a49505c65bdb797e8279686):

C:\dev\IPPRPO\lab3\IPPRPOlab3\test-data\CopyofM.cs

C:\dev\IPPRPO\lab3\IPPRPOlab3\test-data\Match.cs

BUILD SUCCESSFUL in 6s
```

## Непрерывная интеграция (CI/CD)

В проекте настроен CI/CD пайплайн с помощью **GitHub Actions** (файл `.github/workflows/gradle.yml`).

**Процесс работает следующим образом:**
1.  **Триггер:** Workflow запускается автоматически при каждом `push` в ветку `main`.
2.  **Матрица сборок:** Запускаются два параллельных задания для проверки совместимости: одно на `windows-latest`, другое на `ubuntu-latest`.
3.  **Шаги выполнения:**
    *   Клонируется репозиторий.
    *   Устанавливается JDK 17.
    *   Создается временный файл `app.properties` для тестов.
    *   Запускается команда `./gradlew build`, которая компилирует код и выполняет все тесты.
4.  **Артефакты:** В случае успешного завершения каждого задания, собранный JAR-файл публикуется как **артефакт сборки**. Его можно скачать со страницы завершенного workflow на вкладке "Actions" в GitHub.
